<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>  
    <title>create booking</title>
</head>
<body>
    <div class=" m-5">
        <h3 class="mx-3">create booking</h3>
        <div class="my-3">
            <form action="#" method="POST">
                {% csrf_token %}
            <div style="display: flex;" >
                <div class="m-3">
                    <label class="form-label" for="rentfrom">Booking Date</label>
                    <input type="date" name="rentfrom" id="rentfrom" class="form-control" required />
                </div>
    
                <div class="m-3">
                    <label class="form-label" for="rentto">Return Date</label>
                    <input type="date" name="rentto" id="rentto" class="form-control" required />
                </div>
                
                <div class="m-3">
                    <label class="form-label" for="rentto">Booking Time</label>
                    <select class="form-select" aria-label="Default select example" required>
                        <option selected>Booking Time</option>
                        <option value="1">Morning</option>
                        <option value="2">AfterNoon</option>
                        <option value="2">Evening</option>
                    </select>
                </div>
    
                <div class="m-3">
                    <label class="form-label" for="rentto">Return Time</label>
                    <select class="form-select" aria-label="Default select example" required>
                        <option selected>Return Time</option>
                        <option value="1">Morning</option>
                        <option value="2">AfterNoon</option>
                        <option value="2">Evening</option>
                    </select>
                </div>
    
                <div class="m-3">
                    <label class="form-label" for="rentto">Branch</label>
                    <select class="form-select" aria-label="Default select example" required>
                        <option selected>Branch</option>
                        <option value="1">Branch x</option>
                        <option value="2">Branch y</option>
                    </select>
                </div>
            </div>
            <button type="submit" id="startBooking" class="btn btn-primary m-3">start booking</button>
            </form>
        </div>
        
        <div class="d-none" id="bookingSection">
            <form>
            <h5 class="m-3">Customer</h5>
            <div style="display: flex;">
                <div class="mx-3" style="width:40%;">
                    <label for="name" class="form-label">Name*</label>
                    <input type="text" class="form-control" id="name" required>
                </div>
                <div class="mx-3" style="width:40%;">
                    <label for="number" class="form-label">Mobile Number*</label>
                    <input type="number" class="form-control" id="number" required>
                </div>
            </div>
            <div style="display: flex;">
                <div class="m-3" style="width:40%;">
                    <label for="whatsappnumber" class="form-label">Whatsapp Number*</label>
                    <input type="number" class="form-control" id="whatsappnumber" required>
                </div>
                <div class="m-3" style="width:40%;">
                    <label for="address" class="form-label">Address*</label>
                    <input type="text" class="form-control" id="address" required>
                </div>
            </div>
            <div style="display: flex;">
                <div class="mx-3" style="width:26%;">
                    <label for="reference" class="form-label">Reference No*</label>
                    <input type="text" class="form-control" id="reference" required>
                </div>

                <div class="mx-3" style="width:25%;">
                    <label for="shop" class="form-label">Shop*</label>
                    <input type="text" class="form-control" id="shop" required>
                </div>

                <div class="mx-3" style="width:26%;">
                    <label for="seller" class="form-label">Seller*</label>
                    <input type="text" class="form-control" id="seller" required>
                </div>
            </div>
            <h5 class="my-5 mx-3">Products</h5>
            <table id="table" style="width:82%" class=" mx-3 table">
                <thead>
                  <tr>
                    <th >Name</th>
                    <th scope="col">Description</th>
                    <th scope="col">Size</th>
                    <th scope="col">Price</th>
                    <th scope="col"><span onclick="addProductForm()"><i class="fas fa-plus"></i></span></th>
                  </tr>
                </thead>
                <tbody class="productForm">
                    <tr>
                        <td ><input type="text" class="form-control" id="name" placeholder="Type A Dress Id" required></td>
                        <td ><input type="text" class="form-control" id="name" placeholder="Description" required></td>
                        <td ><input type="text" class="form-control" id="name" placeholder="Size" required></td>
                        <td ><input type="text" class="form-control" id="name" placeholder="Price" required></td>
                        <td><span onclick="removeProductForm(this)"><i class="fas fa-trash-alt"></i></span></td>
                    </tr>
                </tbody>
            </table>
            <h5 class="my-5 mx-3">Total</h5>
            <div style="display: flex;">
                <div class="mx-3" style="width:20%;">
                    <label for="totalamount" class="form-label">TotalAmount*</label>
                    <input type="number" class="form-control" id="totalamount" required>
                </div>
                <div class="mx-3" style="width:18%;">
                    <label for="discount" class="form-label">Discount*</label>
                    <input type="number" class="form-control" id="discount" required>
                </div>
                <div class="mx-3" style="width:18%;">
                    <label for="amountpaid" class="form-label">AmountPaid*</label>
                    <input type="number" class="form-control" id="amountpaid" required>
                </div>
                <div class="mx-3" style="width:18%;">
                    <label for="amountdue" class="form-label">AmountDue*</label>
                    <input type="number" class="form-control" id="amountdue" readonly>
                </div>
            </div>
            <button class=" my-5 mx-3 btn btn-primary">Submit</button>
            </form>
        </div>

    </div>


    <script>
        let startBooking = document.getElementById("startBooking")
        let bookingSection = document.getElementById("bookingSection")

        startBooking.addEventListener('click', (e) => {
            e.preventDefault()
            if(document.getElementById('rentfrom').value && document.getElementById('rentto').value ){
                bookingSection.classList.remove("d-none")
            }
        })

        function addProductForm() {
            var table = document.getElementById("table");

            var row = table.insertRow(-1);
            var dressid = row.insertCell(0);
            var description = row.insertCell(1);
            var size = row.insertCell(2);
            var price = row.insertCell(3);
            var del = row.insertCell(4);

            dressid.innerHTML = '<input type="text" class="form-control" placeholder="Type A Dress Id">';
            description.innerHTML = '<input type="text" class="form-control" placeholder="Description">';
            size.innerHTML = '<input type="text" class="form-control" placeholder="Size">';
            price.innerHTML = '<input type="number" class="form-control" placeholder="Price">';
            del.innerHTML = '<span onclick="removeProductForm(this)"><i class="fas fa-trash-alt"></i></span>'

        }

        function removeProductForm(ele){
            console.log("dd")
            ele.parentNode.parentElement.remove();
            return;
        }

        let amountpaid = document.getElementById('amountpaid');
        amountpaid.addEventListener('keyup', findDue);

        function findDue(){
            let totalAmount = document.getElementById("totalamount").value;
            let amountpaid = document.getElementById("amountpaid").value;
            let discount = document.getElementById("discount").value;
            var finaldue = totalAmount - amountpaid - discount
            document.getElementById("amountdue").value = finaldue

        }




    </script>


</body>
</html>